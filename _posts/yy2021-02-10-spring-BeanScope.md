---
layout: post
title:  "Bean Scope"
subtitle:   "Bean Scope"
categories: spring
tags: Bean Scope
comments: false
---
## Bean Scope

**Spring Scope**
- 싱글톤: 기본 스코프, 스프링 컨테이너의 시작과 종료까지 유지되는 **가장 넓은 범위**의 스코프입니다.  
- 프로토타입: 스프링 컨테이너는 프로토타입 빈의 생성과 의존관계 주입까지만 관여하고 더는 관리하지 않는 **매우 짧은 범위**의 스코프입니다.  
- 웹 관련 스코프  
	+ request: 웹 요청이 들어오고 나갈때 까지 유지되는 스코프입니다.  
	+ session: 웹 세션이 생성되고 종료될 때 까지 유지되는 스코프입니다.  
	+ application: 웹의 서블릿 컨텍스와 같은 범위로 유지되는 스코프입니다.  

### &#128204; 프로토타입 스코프
프로토타입 스코프를 스프링 컨테이너에 조회하면 스프링 컨테이너는 항상 **새로운 인스턴스를 생성**해서 반환합니다.  

#### 싱글톤 빈 요청
![spring img](/assets/spring/9.JPG)  
1. 싱글톤 스코프의 빈을 스프링 컨테이너에 요청한다.  
2. 스프링 컨테이너는 **본인이 관리하는 스프링 빈**을 반환한다.  
3. 이후에 스프링 컨테이너에 같은 요청이 와도 **같은 객체 인스턴스의 스프링 빈을 반환**한다.  

#### 프로토타입 빈 요청1
![spring img](/assets/spring/9.JPG)  
1. 프로토타입 스코프의 빈을 스프링 컨테이너에 요청한다.
2. 스프링 컨테이너는 이 시점에 **프로토타입 빈을 생성**하고, **필요한 의존관계를 주입**한다.

#### 프로토타입 빈 요청2
![spring img](/assets/spring/9.JPG)  
3. 스프링 컨테이너는 생성한 프로토타입 빈을 클라이언트에 반환한다.
4. 이후에 스프링 컨테이너에 같은 요청이 오면 **항상 새로운 프로토타입 빈을 생성해서 반환**한다.

##### 프로토타입 빈의 특징
- 스프링 컨테이너에 요청할 때 마다 새로 생성됩니다.  
- 스프링 컨테이너는 **프로토타입 빈의 생성과 의존관계 주입 그리고 초기화까지만 관여**합니다. 
- 클라이언트에 빈을 반환하고, 이후 스프링 컨테이너는 생성된 프로토타입 빈을 관리하지 않습니다. 
- @PreDestory 같은 종료 메서드가 호출되지 않습니다.  
- 그래서 프로토타입 빈은 프로토타입 빈을 조회한 클라이언트가 관리해야 합니다. 종료 메서드에 대한 호출도 클라이언트가 직접 해야합니다.  

### &#128204; 싱글톤 빈과 함께 사용시 문제점


&#10024; 
&#128226; 
{% highlight java %}
{% endhighlight %}